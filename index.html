<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barber Life Simone</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<header class="hero">
  <img src="Logo unico .jpg" class="hero-img">
  <div class="menu-touch" onclick="toggleMenu()"></div>
</header>

<nav id="menu" class="menu">
  <a onclick="showSection('booking')">Home</a>
  <a onclick="showSection('prezzi')">Listino prezzi</a>
  <a onclick="showSection('mappa')">Dove trovarmi</a>
  <a href="https://www.instagram.com/barber_life_simone" target="_blank">Instagram</a>
  <a href="tel:3421722184">Chiama</a>
  <a href="https://www.google.com/maps/search/?api=1&query=Barber+Life+Simone+Scoglitti" target="_blank">Lascia una recensione</a>
  <a onclick="showSection('galleryMenu')">Galleria</a>
</nav>

<main class="container">

<!-- PRENOTAZIONE -->
<section id="booking" class="section active">
<h2>Prenota appuntamento</h2>

<form id="bookingForm">

<label>Nome e cognome</label>
<input type="text" id="nome" required>

<label>Telefono</label>
<input type="tel" id="telefono" required>

<label>Servizio</label>
<select id="servizio" required>
<option value="">Seleziona servizio</option>
<option>Taglio €14</option>
<option>Taglio Baby €10</option>
<option>Barba €5</option>
<option>Barba sfumata €5</option>
<option>Taglio + Barba + Shampoo €20</option>
<option>Shampoo €3</option>
<option>Basette e collo €3</option>
<option>Sopracciglia €3</option>
<option>Pettinata + Shampoo €5</option>
<option>Sfumatura lato da €10</option>
<option>Trattamento lisciante da €15</option>
<option>Trattamenti da €10</option>
</select>

<label>Data appuntamento</label>
<input type="date" id="date" required>

<label>Orario appuntamento</label>
<select id="time" required>
<option value="">Seleziona orario</option>
</select>

<button type="submit">PRENOTA APPUNTAMENTO</button>

</form>

<p id="msg"></p>
</section>

<!-- MAPPA -->
<section id="mappa" class="section">
<h2>Dove trovarmi</h2>
<button onclick="openMaps()">Apri su Google Maps</button>
</section>

<!-- PREZZI -->
<section id="prezzi" class="section">
<h2>Listino prezzi</h2>
<ul class="price-list">
<li>Taglio €14</li>
<li>Taglio Baby €10</li>
<li>Barba €5</li>
<li>Barba sfumata €5</li>
<li>Taglio + Barba + Shampoo €20</li>
<li>Shampoo €3</li>
<li>Basette e collo €3</li>
<li>Sopracciglia €3</li>
<li>Pettinata + Shampoo €5</li>
<li>Sfumatura lato da €10</li>
<li>Trattamento lisciante da €15</li>
<li>Trattamenti da €10</li>
</ul>
</section>

<!-- MENU GALLERIA -->
<section id="galleryMenu" class="section">
<h2>Galleria</h2>
<button onclick="showSection('lavori')">I miei lavori</button>
<button onclick="showSection('locale')">Foto del locale</button>
</section>

<section id="lavori" class="section gallery">
<img src="Taglio0.jpg">
<img src="Taglio1.jpg">
<img src="Taglio2.jpg">
<img src="Taglio3.jpg">
<img src="Taglio4.jpg">
<img src="Taglio5.jpg">
<img src="Taglio6.jpg">
<img src="Taglio7.jpg">
</section>

<section id="locale" class="section gallery">
<img src="locale1.jpg">
<img src="locale2.jpg">
<img src="locale3.jpg">
</section>

</main>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyA-v4UrLIZPJGrq4_Mwc12XJlGHM26RLpA",
  authDomain: "barber-life-simone.firebaseapp.com",
  projectId: "barber-life-simone",
  storageBucket: "barber-life-simone.firebasestorage.app",
  messagingSenderId: "1017187146409",
  appId: "1:1017187146409:web:4b91d3f3b6023f07e267b8"
};

const app = initializeApp(firebaseConfig);
window.db = getFirestore(app);
</script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyA-v4UrLIZPJGrq4_Mwc12XJlGHM26RLpA",
  authDomain: "barber-life-simone.firebaseapp.com",
  projectId: "barber-life-simone",
  storageBucket: "barber-life-simone.firebasestorage.app",
  messagingSenderId: "1017187146409",
  appId: "1:1017187146409:web:4b91d3f3b6023f07e267b8"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.toggleMenu = function () {
  document.getElementById("menu").classList.toggle("open");
};

window.showSection = function (id) {
  document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.getElementById("menu").classList.remove("open");
};

window.openMaps = function () {
  window.open("https://www.google.com/maps/search/?api=1&query=Barber+Life+Simone+Scoglitti");
};

const dateInput = document.getElementById("date");
const timeSelect = document.getElementById("time");
const form = document.getElementById("bookingForm");

function generaOrari() {
  timeSelect.innerHTML = "<option value=''>Seleziona orario</option>";

  function add(h1, m1, h2, m2) {
    let h = h1;
    let m = m1;

    while (h < h2 || (h === h2 && m <= m2)) {
      const hh = String(h).padStart(2, '0');
      const mm = String(m).padStart(2, '0');

      const opt = document.createElement("option");
      opt.value = hh + ":" + mm;
      opt.textContent = hh + ":" + mm;
      timeSelect.appendChild(opt);

      m += 30;
      if (m >= 60) { m = 0; h++; }
    }
  }

  add(9, 30, 12, 30);
  add(15, 30, 19, 30);
}

generaOrari();

dateInput.addEventListener("change", function () {
  const d = new Date(this.value);
  const day = d.getDay();

  if (day === 0 || day === 1) {
    alert("Chiuso domenica e lunedì");
    this.value = "";
  }
});

form.addEventListener("submit", async function (e) {
  e.preventDefault();

  const nome = document.getElementById("nome").value;
  const telefono = document.getElementById("telefono").value;
  const servizio = document.getElementById("servizio").value;
  const data = dateInput.value;
  const ora = timeSelect.value;

  if (!nome || !telefono || !servizio || !data || !ora) {
    alert("Compila tutti i campi");
    return;
  }

  try {
    await addDoc(collection(db, "prenotazioni"), {
      nome, telefono, servizio, data, ora, creato: new Date()
    });

    document.getElementById("msg").textContent = "Prenotazione salvata ✔";
    form.reset();
    generaOrari();

  } catch (err) {
    document.getElementById("msg").textContent = "Errore salvataggio ❌";
  }
});
</script>
</body>
</html>
